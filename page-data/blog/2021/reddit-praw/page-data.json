{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2021/reddit-praw/","result":{"data":{"site":{"siteMetadata":{"title":"Roman Klimenko"}},"markdownRemark":{"id":"2e62dbd9-a1c7-5560-a79b-1ceed5768144","excerpt":"While Reddit REST API is pretty straightforward, PRAW (The Python Reddit API Wrapper) makes the tasks of retrieving Reddit data even more effortless. Recently Iâ€¦","html":"<p>While <a href=\"https://www.reddit.com/dev/api/\">Reddit REST API</a> is pretty straightforward, PRAW (<a href=\"https://praw.readthedocs.io/en/latest/index.html\">The Python Reddit API Wrapper</a>) makes the tasks of retrieving Reddit data even more effortless.</p>\n<p>Recently I had to go through my subreddits and download all the posted images.\nThat took less than an hour to read the docs and make what I want.</p>\n<p>The first step is to create a developer application here: <a href=\"https://www.reddit.com/prefs/apps\">https://www.reddit.com/prefs/apps</a>:\n<img src=\"create.png\" class=\"img-fluid\" style=\"box-shadow: 0 1px 3px rgba(34, 25, 25, 0.4);\" />\nThe redirect URL can be any public URL, but this field can't be empty, so I just typed the Reddit website there.</p>\n<p>When you have created the application, it will look like this one:\n<img src=\"app.png\" class=\"img-fluid\" style=\"box-shadow: 0 1px 3px rgba(34, 25, 25, 0.4);\" /></p>\n<p>You would need a <code class=\"language-text\">client_id</code> and <code class=\"language-text\">client_secret</code>. The first one appears right under the words \"personal use script\" on the screenshot. The <code class=\"language-text\">client_secret</code> is, obviously, the \"secret.\"</p>\n<p>When the preparations are done, and PRAW is installed (<code class=\"language-text\">pip3 install praw</code>), the rest is up to what you want. For example, to initialize a PRAW client:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> praw\n\nreddit <span class=\"token operator\">=</span> praw<span class=\"token punctuation\">.</span>Reddit<span class=\"token punctuation\">(</span>\n    client_id<span class=\"token operator\">=</span>CLIENT_ID<span class=\"token punctuation\">,</span>\n    client_secret<span class=\"token operator\">=</span>CLIENT_SECRET<span class=\"token punctuation\">,</span>\n    username<span class=\"token operator\">=</span>USERNAME<span class=\"token punctuation\">,</span>\n    password<span class=\"token operator\">=</span>PASSWORD<span class=\"token punctuation\">,</span>\n    user_agent<span class=\"token operator\">=</span><span class=\"token string\">\"reddit-feed\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Well, it will not work if you have enabled two-factor authentication for your account. There is <a href=\"https://praw.readthedocs.io/en/latest/getting_started/authentication.html#oauth\">the right way</a> to handle it, but in my case, I just use my backup account.</p>\n<p>Then to get a <a href=\"https://praw.readthedocs.io/en/latest/code_overview/models/subreddit.html\">subreddit</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">subreddit <span class=\"token operator\">=</span> reddit<span class=\"token punctuation\">.</span>subreddit<span class=\"token punctuation\">(</span><span class=\"token string\">\"pics\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>And all <a href=\"https://praw.readthedocs.io/en/latest/code_overview/models/submission.html\">submissions</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">for submission in subreddit.top(time_filter=&#39;week&#39;):\n\tpass # TODO: your code goes here</code></pre></div>\n<p>To save an image, you have to use the <code class=\"language-text\">submission.url</code>. And when you construct the path to save the file, you can save it with the <code class=\"language-text\">requests</code> module (<code class=\"language-text\">pip3 install requests</code>) like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">response <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>submission<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>file_path<span class=\"token punctuation\">,</span> <span class=\"token string\">'wb'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">:</span>\n    <span class=\"token builtin\">file</span><span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span></code></pre></div>","fields":{"slug":"/blog/2021/reddit-praw/"},"frontmatter":{"title":"PRAW, The Python Reddit API Wrapper","date":"May 02, 2021","tags":["how-to","reddit","python"],"description":null}},"previous":{"fields":{"slug":"/blog/2021/right-to-left-d3-tree/"},"frontmatter":{"title":"Render a right-to-left tree with D3.js"}},"next":null},"pageContext":{"id":"2e62dbd9-a1c7-5560-a79b-1ceed5768144","previousPostId":"c3c16d55-6ad6-5538-aeaa-4ddc189563a1","nextPostId":null}},"staticQueryHashes":["2841359383"]}